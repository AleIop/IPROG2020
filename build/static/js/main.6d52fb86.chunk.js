(this.webpackJsonppeekmusiclab=this.webpackJsonppeekmusiclab||[]).push([[0],{10:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"e",(function(){return h}));var a=n(22),r=n.n(a),l=n(28),c=n(16),o=n(29),i=n(0),s=n.n(i);n(50);function u(e){o.a.render(e,(function(e){return s.a.createElement(s.a.Fragment,{},e.map((function(e){return m(e)})))}),document.getElementById("resultsDiv")),setTimeout((function(){document.body.querySelectorAll(".song").forEach((function(e){var t=document.getElementById(e.id);g(e.id).then((function(e){var n=window.blobCreator(e);t.appendChild(n)}))}))}),1e3)}function d(e,t){setTimeout((function(){var t=document.getElementById(e);null==t||t.getElementsByTagName("svg").length||g(e).then((function(e){var n=window.blobCreator(e);t.appendChild(n)}))}),1e3)}function m(e){if(null!==e.track.preview_url)return s.a.createElement("div",{id:e.track.id,key:e.track.id,className:"song draggable songtooltip",onDragStart:function(t){return f(t,e)},draggable:!0,onContextMenu:function(t){return p(e.track.id)}},s.a.createElement("audio",{id:"audio"+e.track.id,src:e.track.preview_url,muted:!0,loop:!0}),s.a.createElement("div",{id:"tooltip-"+e.track.id,className:"tooltiptext hidden"},s.a.createElement("h3",null,e.track.name),s.a.createElement("br",null),s.a.createElement("a",{href:e.track.external_urls.spotify},"Open in spotify")),s.a.createElement("br",null))}var f=function(e,t){console.log("Song "+t.track.name+" is being dragged"),e.dataTransfer.setData("text/plain",JSON.stringify(t)),e.dataTransfer.effectAllowed="copy"},p=function(e){console.log("open toolkit");document.getElementsByClassName("tooltiptext visible");var t=document.getElementById("tooltip-"+e),n=t.classList[1];t.classList.remove(n),t.classList.add("hidden"==n?"visible":"hidden")};function b(e){}function h(e){return E(e=e||"37i9dQZEVXbMDoHDwVN2tF","playlist").then((function(e){return e.items}))}function g(e){return E("?ids="+(e=e||""),"audio").then((function(e){return e.audio_features[0]}))}function E(t,n){var a=c.b+":"+c.d,o=new e(a).toString("base64"),i="",s=new Headers;s.append("Authorization","Basic "+o);var u=new URLSearchParams;u.append("grant_type","client_credentials");var d=fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:s,body:u,redirect:"follow"}).then((function(e){return e.json()})).catch((function(e){return console.log("error",e)}));function m(){return(m=Object(l.a)(r.a.mark((function e(n){var a,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.then((function(e){return i=e.access_token}));case 2:return e.sent,a="playlist"==n?c.c+t+"/tracks":c.a+t,l=fetch(a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+i}}).then((function(e){return e.json()})),e.abrupt("return",l);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(e){return m.apply(this,arguments)}(n)}}).call(this,n(43).Buffer)},16:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return c}));var a="https://api.spotify.com/v1/playlists/",r="https://api.spotify.com/v1/audio-features/",l="440325bb5cab47af9d5f1af2cad762fa",c="c5bf0b3bd0ca4d4eac5b684505d7665d"},2:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i}));var a=function(e){return{type:"ADD_SONG",song:e}},r=function(e){return{type:"REMOVE_SONG",song:e}},l=function(e){return{type:"SET_PLAYLIST",songs:e}},c=function(e){return{type:"LOAD_PLAYLIST",id:e}},o=function(e){return{type:"MUTE_AUDIO",bool:e}},i=function(e){return{type:"HIDE_NAVBAR",bool:e}}},26:function(e,t,n){},29:function(e,t,n){"use strict";var a=n(30),r=n(31),l=n(0),c=n.n(l),o=n(11),i=n.n(o),s=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"render",value:function(e,t,n){this.cancelCallback&&this.cancelCallback();var a=!1;i.a.render(this.createSpinner(),n),e.then((function(e){a||i.a.render(t(e),n)})).catch((function(e){if(!a){var t=c.a.createElement("span",null,e.message);i.a.render(t,n)}})),this.cancelCallback=function(){a=!0}}},{key:"createSpinner",value:function(){return c.a.createElement("div",{className:"spinnerClass"},c.a.createElement("img",{height:100,alt:"",src:"http://cdn.lowgif.com/full/d9675675623d5f27-loading-gif-transparent-background-loading-gif.gif"}))}}]),e}();t.a=s},34:function(e,t,n){e.exports=n(49)},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(11),c=n(13),o=n(9),i=n(32),s=n(12),u=n(8),d=function(e){var t=e.songs,n=e.muted,a=(e.nav,e.homepageControl),l=e.playlistControl,c=e.handleClick,o=(e.openNav,e.onDrop),i=e.onDragOver,s=Object(u.a)(a,2),d=(s[0],s[1],Object(u.a)(l,2)),m=d[0],f=d[1],p=(t.length,o),b=i;return r.a.createElement("div",{id:"navbar",className:"navbar debug nothidden"},r.a.createElement("h1",{id:"menu-title"},"blobify."),r.a.createElement("div",{className:"navbarContent"},r.a.createElement("div",{className:"navbarContent-playlist"},r.a.createElement("br",null),r.a.createElement("h2",{id:"content-title"},"Pick playlist"),r.a.createElement("h4",{id:"content-title"},"Switch playlist to ",r.a.createElement("span",{className:"tooltip"},"blobify songs",r.a.createElement("span",{className:"tooltiptext"},"What you see here is not random colors and shapes. ",r.a.createElement("br",null),r.a.createElement("br",null),"Songs contain data. ",r.a.createElement("br",null)," ",r.a.createElement("br",null),"A blob is a visual representation of a songs data, more so its energy and key. ",r.a.createElement("br",null),r.a.createElement("br",null),"The level of energy determines its shape, key its color and the dots... - we call it blobify. "))),r.a.createElement("div",{className:"playlist"}),r.a.createElement("h5",{id:"content-title"},"Fetched from Spotify")),r.a.createElement("div",{className:"navbarContent-save droppable drophere",onDragOver:b,onDrop:p},r.a.createElement("h2",{id:"content-title"},"Save songs"),r.a.createElement("h4",{id:"content-title"},"Drag and drop blobs here to add songs to your collection."),r.a.createElement("div",{className:"collection"},r.a.createElement("div",{id:"miniPreview",className:"miniPreviewScroll"}),r.a.createElement("button",{id:"collection-button",onClick:function(){return m()}},f)))),r.a.createElement("div",{className:"muteButton mute",onClick:function(){return c(n.audioMuted)}}))},m=n(2),f=Object(o.b)((function(e,t){return{songs:e.currentPlaylist,muted:e.audioMuted,nav:e.navbarHidden}}),(function(e,t){return{homepageControl:[function(){return t.history.push("/trending")},"Back to the trending songs"],playlistControl:[function(){for(var e=document.getElementById("miniPreview");e.firstChild;)e.removeChild(e.firstChild);t.history.push("/myplaylist")},"Export to Spotify"],handleClick:function(t){e(Object(m.d)(t));var n=document.body.querySelector(".muteButton"),a=n.classList[1];n.classList.remove(a),n.classList.add("mute"==a?"unmute":"mute");var r=document.getElementsByTagName("audio");Object.keys(r).map((function(e){return r[e].muted=t}))},openNav:function(t){e(Object(m.b)(t));var n=document.getElementById("navbar"),a=n.classList[2];n.classList.remove(a),n.classList.add("hidden"==a?"nothidden":"hidden")},onDrop:function(t){console.log("Dropped into playlist");var n=t.dataTransfer.getData("text/plain");e(Object(m.a)(JSON.parse(n)));var a=document.getElementById("miniPreview"),r=document.getElementById(JSON.parse(n).track.id),l=document.getElementById(JSON.parse(n).track.id).cloneNode(!0);l.getElementsByTagName("g")[0].setAttribute("transform","matrix(1 0 0 1 0 -10) scale(0.2)"),l.getElementsByTagName("svg")[0].setAttribute("height","50"),l.getElementsByTagName("svg")[0].setAttribute("width","50"),l.addEventListener("click",(function(t){e(Object(m.e)(JSON.parse(n)));for(var l=a.children,c=0;c<l.length;c++){var o=l[c];if(o.getAttribute("id")==JSON.parse(n).track.id){a.removeChild(o);break}}r.getElementsByTagName("svg")[0].setAttribute("opacity","1.0")})),l.style.height="70px",l.style.width="60px",a.appendChild(l),r.getElementsByTagName("svg")[0].setAttribute("opacity","0.2")},onDragOver:function(e){e.preventDefault()}}}))(d),p=(n(26),function(e){var t=e.songs,n=e.whenDone,l=e.onResultsClick,c=e.onAdd,o=e.onLoadPlaylist,i=Object(u.a)(n,2),s=(i[0],i[1],Object(u.a)(c,2));s[0],s[1];return Object(a.useEffect)((function(){o("37i9dQZEVXbMDoHDwVN2tF")}),[]),r.a.createElement("div",{id:"search",className:"mainContent debug"},r.a.createElement("div",{id:"resultsDiv",onClick:function(e){return l(e.target,t)}}))}),b=n(10),h=Object(o.b)((function(e){return{songs:e.currentPlaylist}}),(function(e,t){return{whenDone:[function(){return t.history.push("/myplaylist")},"Go to My Playlist"],onResultsClick:function(t,n){var a=t.classList.contains("song"),r=t.classList.contains("addButton");if(a){t.id;t.childNodes[1].classList.remove("buttonInvisible"),document.querySelectorAll(".buttonVisible").forEach((function(e){e.classList.remove("buttonVisible"),e.classList.add("buttonInvisible")})),t.firstChild.classList.add("buttonVisible")}if(r){var l=t.parentNode.id,c=n.find((function(e){return e.track.id==l}));e(Object(m.a)(c))}},onAdd:[function(t){return e(Object(m.a)(t))},"Add to the playlist"],onLoadPlaylist:function(t){Object(b.e)(t).then((function(t){return e(Object(m.f)(t))})),e(Object(m.c)(t))}}}))(p),g=function(e){var t=e.songs,n=e.whenDone,a=e.onDelete,l=e.displaySong,c=e.getBlob,o=Object(u.a)(n,2),i=o[0],s=o[1];return r.a.createElement("div",{id:"summary",className:"mainContent debug"},r.a.createElement("div",null,"Current playlist:",r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Song"),r.a.createElement("th",null,"Genre"),r.a.createElement("th",null,"Release date"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{id:"blob"},c(e.track.id)),r.a.createElement("td",null,l(e)),r.a.createElement("td",null,e.track.name),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return a(e)}},"Delete from playlist")))}))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",null,"TOTAL SONGS"),r.a.createElement("td",null),r.a.createElement("td",null,t.length))))),r.a.createElement("div",null,r.a.createElement("button",{className:"nav",onClick:function(){return i()}},s)))},E=Object(o.b)((function(e){return{songs:e.songs}}),(function(e,t){return{whenDone:[function(){return t.history.push("/trending")},"Back to the trending songs"],onDelete:function(t){return e(Object(m.e)(t))},displaySong:function(e){return Object(b.b)(e)},getBlob:function(e){return Object(b.d)(e)}}}))(g),v=function(){return r.a.createElement(i.a,null,r.a.createElement("div",{className:"flexParent"},r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",render:function(){return r.a.createElement(s.a,{to:"/trending"})}})),r.a.createElement(s.b,{path:"/trending",component:h}),r.a.createElement(s.b,{path:"/myplaylist",component:E}),r.a.createElement(s.b,{component:f})))},y=n(17);var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.song;switch(t.type){case"ADD_SONG":console.log(e);var a=e.some((function(e){return e.track.id===n.track.id}));return a?(window.alert("".concat(n.track.name," is already present in the playlist.")),Object(y.a)(e)):(n.addTime=Object(b.a)(n),[].concat(Object(y.a)(e),[n]));case"REMOVE_SONG":return Object(y.a)(e).filter((function(e){return e.track.id!==n.track.id}));default:return Object(y.a)(e)}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLAYLIST":return t.songs;case"LOAD_PLAYLIST":return Object(b.c)(Object(b.e)(t.id)),e;default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MUTE_AUDIO":return e.audioMuted=!t.bool,e;default:return e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HIDE_NAVBAR":return e.navbarHidden=!t.bool,e;default:return e}},C=Object(c.b)({songs:k,currentPlaylist:N,audioMuted:O,navbarHidden:S}),j=localStorage.getItem("reduxState")?JSON.parse(localStorage.getItem("reduxState")):{},D=Object(c.c)(C,j);D.subscribe((function(){return localStorage.setItem("reduxState",JSON.stringify(D.getState()))})),Object(l.render)(r.a.createElement(o.a,{store:D},r.a.createElement(v,null)),document.getElementById("root"))},50:function(e,t,n){"use strict";var a=n(9),r=n(8),l=n(0),c=n.n(l),o=function(e){var t=e.songs,n=e.nav,a=e.homepageControl,l=e.playlistControl,o=e.openNav,i=Object(r.a)(a,2),s=(i[0],i[1],Object(r.a)(l,2));s[0],s[1],t.length;return c.a.createElement("div",null,c.a.createElement("button",{id:"settings-button",onClick:function(){return o(n.navbarHidden)}},"Settings"),c.a.createElement("br",null),c.a.createElement("div",{id:"settings",className:"settings debug hidden"},c.a.createElement("label",{htmlFor:"favcolor"},"Select your favorite color:"),c.a.createElement("input",{type:"color",id:"favcolor",name:"favcolor",onChange:function(){return console.log("change",void 0)}}),c.a.createElement("h3",{class:"tooltip"},"blobify songs",c.a.createElement("span",{class:"tooltiptext"},"What you see here is not random colors and shapes. ",c.a.createElement("br",null),c.a.createElement("br",null),"Each song contains data. ",c.a.createElement("br",null)," ",c.a.createElement("br",null),"A blob is a visual representation of that song and it's data. ",c.a.createElement("br",null),c.a.createElement("br",null),"The level of energy determines it's shape, key for color and the dots... - we call it blobify. ")),c.a.createElement("div",{className:"keys"},c.a.createElement("div",{"data-key":"0",className:"key","data-note":"C"},c.a.createElement("span",{className:"hints"},"C")),c.a.createElement("div",{"data-key":"1",className:"key sharp","data-note":"C#"},c.a.createElement("span",{className:"hints"},"C#")),c.a.createElement("div",{"data-key":"2",className:"key","data-note":"D"},c.a.createElement("span",{className:"hints"},"D")),c.a.createElement("div",{"data-key":"3",className:"key sharp","data-note":"D#"},c.a.createElement("span",{className:"hints"},"D#")),c.a.createElement("div",{"data-key":"4",className:"key","data-note":"E"},c.a.createElement("span",{className:"hints"},"E")),c.a.createElement("div",{"data-key":"5",className:"key","data-note":"F"},c.a.createElement("span",{className:"hints"},"F")),c.a.createElement("div",{"data-key":"6",className:"key sharp","data-note":"F#"},c.a.createElement("span",{className:"hints"},"F#")),c.a.createElement("div",{"data-key":"7",className:"key","data-note":"G"},c.a.createElement("span",{className:"hints"},"G")),c.a.createElement("div",{"data-key":"8",className:"key sharp","data-note":"G#"},c.a.createElement("span",{className:"hints"},"G#")),c.a.createElement("div",{"data-key":"9",className:"key","data-note":"A"},c.a.createElement("span",{className:"hints"},"A")),c.a.createElement("div",{"data-key":"10",className:"key sharp","data-note":"A#"},c.a.createElement("span",{className:"hints"},"A#")),c.a.createElement("div",{"data-key":"11",className:"key","data-note":"B"},c.a.createElement("span",{className:"hints"},"B")))))},i=n(2);Object(a.b)((function(e,t){return{songs:e.currentPlaylist,muted:e.audioMuted,nav:e.navbarHidden}}),(function(e,t){return{homepageControl:[function(){return t.history.push("/trending")},"Back to the trending songs"],playlistControl:[function(){return t.history.push("/myplaylist")},"My playlist"],openNav:function(t){e(Object(i.b)(t));var n=document.getElementById("settings"),a=n.classList[2];n.classList.remove(a),n.classList.add("hidden"==a?"nothidden":"hidden")}}}))(o)}},[[34,1,2]]]);
//# sourceMappingURL=main.6d52fb86.chunk.js.map
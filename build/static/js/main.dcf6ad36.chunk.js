(this.webpackJsonppeekmusiclab=this.webpackJsonppeekmusiclab||[]).push([[0],{15:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return o}));var a="https://api.spotify.com/v1/playlists/",r="https://api.spotify.com/v1/audio-features/",c="440325bb5cab47af9d5f1af2cad762fa",o="c5bf0b3bd0ca4d4eac5b684505d7665d"},25:function(e,t,n){},28:function(e,t,n){"use strict";var a=n(29),r=n(30),c=n(0),o=n.n(c),i=n(8),l=n.n(i),u=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"render",value:function(e,t,n){this.cancelCallback&&this.cancelCallback();var a=!1;l.a.render(this.createSpinner(),n),e.then((function(e){a||l.a.render(t(e),n)})).catch((function(e){if(!a){var t=o.a.createElement("span",null,e.message);l.a.render(t,n)}})),this.cancelCallback=function(){a=!0}}},{key:"createSpinner",value:function(){return o.a.createElement("div",{className:"spinnerClass"},o.a.createElement("img",{height:100,alt:"",src:"http://cdn.lowgif.com/full/d9675675623d5f27-loading-gif-transparent-background-loading-gif.gif"}))}}]),e}();t.a=u},33:function(e,t,n){e.exports=n(48)},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n(12),i=n(9),l=n(31),u=n(11),s=n(10),d=function(e){var t=e.songs,n=e.muted,a=e.nav,c=e.homepageControl,o=e.playlistControl,i=e.handleClick,l=e.openNav,u=e.onDrop,d=e.onDragOver,f=Object(s.a)(c,2),m=f[0],p=f[1],b=Object(s.a)(o,2),h=b[0],g=b[1],v=(t.length,u),E=d;return r.a.createElement("div",{id:"navbar",className:"navbar debug hidden"},r.a.createElement("h1",{id:"collection-title",onClick:function(){return l(a.navbarHidden)}},"collection"),r.a.createElement("div",{id:"navbarContent"},r.a.createElement("button",{onClick:function(){return m()}},p),r.a.createElement("br",null),r.a.createElement("span",null),r.a.createElement("br",null),r.a.createElement("button",{className:"drophere playlistCss droppable",onClick:function(){return h()},onDragOver:E,onDrop:v},"Drag and drop ",r.a.createElement("br",null),"blobs here"),r.a.createElement("button",{id:"collection-button",onClick:function(){return h()}},g),r.a.createElement("br",null)),r.a.createElement("div",{className:"muteButton mute",onClick:function(){return i(n.audioMuted)}}))},f=function(e){return{type:"ADD_SONG",song:e}},m=Object(i.b)((function(e,t){return{songs:e.currentPlaylist,muted:e.audioMuted,nav:e.navbarHidden}}),(function(e,t){return{homepageControl:[function(){return t.history.push("/trending")},"Back to the trending songs"],playlistControl:[function(){return t.history.push("/myplaylist")},"My playlist"],handleClick:function(t){e({type:"MUTE_AUDIO",bool:t});var n=document.body.querySelector(".muteButton"),a=n.classList[1];n.classList.remove(a),n.classList.add("mute"==a?"unmute":"mute");var r=document.getElementsByTagName("audio");Object.keys(r).map((function(e){return r[e].muted=t}))},openNav:function(t){e({type:"HIDE_NAVBAR",bool:t});var n=document.getElementById("navbar"),a=n.classList[2];n.classList.remove(a),n.classList.add("hidden"==a?"nothidden":"hidden")},onDrop:function(t){console.log("Dropped into playlist");var n=t.dataTransfer.getData("text/plain");e(f(JSON.parse(n)))},onDragOver:function(e){e.preventDefault()}}}))(d),p=(n(25),function(e){var t=e.songs,n=e.whenDone,c=e.onResultsClick,o=e.onAdd,i=e.onLoadPlaylist,l=Object(s.a)(n,2),u=(l[0],l[1],Object(s.a)(o,2));u[0],u[1];return Object(a.useEffect)((function(){i("37i9dQZEVXbMDoHDwVN2tF")}),[]),r.a.createElement("div",{id:"search",className:"mainContent debug"},r.a.createElement("div",{id:"resultsDiv",onClick:function(e){return c(e.target,t)}}))}),b=n(7),h=Object(i.b)((function(e){return{songs:e.currentPlaylist}}),(function(e,t){return{whenDone:[function(){return t.history.push("/myplaylist")},"Go to My Playlist"],onResultsClick:function(t,n){var a=t.classList.contains("song"),r=t.classList.contains("addButton");if(a){t.id;t.childNodes[1].classList.remove("buttonInvisible"),document.querySelectorAll(".buttonVisible").forEach((function(e){e.classList.remove("buttonVisible"),e.classList.add("buttonInvisible")})),t.firstChild.classList.add("buttonVisible")}if(r){var c=t.parentNode.id,o=n.find((function(e){return e.track.id==c}));e(f(o))}},onAdd:[function(t){return e(f(t))},"Add to the playlist"],onLoadPlaylist:function(t){Object(b.d)(t).then((function(t){return e({type:"SET_PLAYLIST",songs:t})})),e({type:"LOAD_PLAYLIST",id:t})}}}))(p),g=function(e){var t=e.songs,n=e.whenDone,a=e.onDelete,c=e.displaySong,o=Object(s.a)(n,2),i=o[0],l=o[1];return r.a.createElement("div",{id:"summary",className:"mainContent debug"},r.a.createElement("div",null,"Current playlist:",r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Song"),r.a.createElement("th",null,"Genre"),r.a.createElement("th",null,"Release date"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,c(e)),r.a.createElement("td",null,e.track.id),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return a(e)}},"Delete from playlist")))}))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",null,"TOTAL SONGS"),r.a.createElement("td",null),r.a.createElement("td",null,t.length))))),r.a.createElement("div",null,r.a.createElement("button",{className:"nav",onClick:function(){return i()}},l)))},v=Object(i.b)((function(e){return{songs:e.songs}}),(function(e,t){return{whenDone:[function(){return t.history.push("/trending")},"Back to the trending songs"],onDelete:function(t){return e(function(e){return{type:"REMOVE_SONG",song:e}}(t))},displaySong:function(e){return Object(b.b)(e)}}}))(g),E=function(){return r.a.createElement(l.a,null,r.a.createElement("div",{className:"flexParent"},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",render:function(){return r.a.createElement(u.a,{to:"/trending"})}})),r.a.createElement(u.b,{path:"/trending",component:h}),r.a.createElement(u.b,{path:"/myplaylist",component:v}),r.a.createElement(u.b,{component:m})))},y=n(16);var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.song;switch(t.type){case"ADD_SONG":var a=e.some((function(e){return e.track.id===n.track.id}));return a?(window.alert("".concat(n.track.name," is already present in the playlist.")),Object(y.a)(e)):(n.addTime=Object(b.a)(n),[].concat(Object(y.a)(e),[n]));case"REMOVE_SONG":return Object(y.a)(e).filter((function(e){return e.track.id!==n.track.id}));default:return Object(y.a)(e)}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLAYLIST":return t.songs;case"LOAD_PLAYLIST":return Object(b.c)(Object(b.d)(t.id)),e;default:return e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MUTE_AUDIO":return e.audioMuted=!t.bool,e;default:return e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HIDE_NAVBAR":return e.navbarHidden=!t.bool,e;default:return e}},j=Object(o.b)({songs:O,currentPlaylist:k,audioMuted:S,navbarHidden:D}),C=localStorage.getItem("reduxState")?JSON.parse(localStorage.getItem("reduxState")):{},N=Object(o.c)(j,C);N.subscribe((function(){return localStorage.setItem("reduxState",JSON.stringify(N.getState()))})),Object(c.render)(r.a.createElement(i.a,{store:N},r.a.createElement(E,null)),document.getElementById("root"))},7:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return p}));var a=n(21),r=n.n(a),c=n(27),o=n(15),i=n(28),l=n(0),u=n.n(l);function s(e){i.a.render(e,(function(e){return u.a.createElement(u.a.Fragment,{},e.map((function(e){return d(e)})))}),document.getElementById("resultsDiv")),setTimeout((function(){document.body.querySelectorAll(".song").forEach((function(e){var t,n=document.getElementById(e.id);(t=e.id,b("?ids="+(t=t||""),"audio").then((function(e){return e.audio_features[0]}))).then((function(e){var t=window.blobCreator(e);n.appendChild(t)}))}))}),1e3)}function d(e){if(null!==e.track.preview_url)return u.a.createElement("div",{id:e.track.id,key:e.track.id,className:"song draggable",onDragStart:function(t){return f(t,e)},draggable:!0},u.a.createElement("audio",{id:"audio"+e.track.id,src:e.track.preview_url,muted:!0}),u.a.createElement("br",null))}var f=function(e,t){console.log("Song "+t.track.name+" is being dragged"),e.dataTransfer.setData("text/plain",JSON.stringify(t)),e.dataTransfer.effectAllowed="copy"};function m(e){}function p(e){return b(e=e||"37i9dQZEVXbMDoHDwVN2tF","playlist").then((function(e){return e.items}))}function b(t,n){var a=o.b+":"+o.d,i=new e(a).toString("base64"),l="",u=new Headers;u.append("Authorization","Basic "+i);var s=new URLSearchParams;s.append("grant_type","client_credentials");var d=fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:u,body:s,redirect:"follow"}).then((function(e){return e.json()})).catch((function(e){return console.log("error",e)}));function f(){return(f=Object(c.a)(r.a.mark((function e(n){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.then((function(e){return l=e.access_token}));case 2:return e.sent,a="playlist"==n?o.c+t+"/tracks":o.a+t,c=fetch(a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+l}}).then((function(e){return e.json()})),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(e){return f.apply(this,arguments)}(n)}}).call(this,n(42).Buffer)}},[[33,1,2]]]);
//# sourceMappingURL=main.dcf6ad36.chunk.js.map